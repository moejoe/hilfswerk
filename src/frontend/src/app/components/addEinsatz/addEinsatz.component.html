<div class="container">
    <div *ngIf="createResult && createResult.isSuccess">
        Einsatz erfolgreich angelegt: {{createResult.id}}
    </div>
    <div *ngIf="createResult && !createResult.isSuccess">
        Fehler beim anlgen des Einsatzes:
        <pre>{{createResult.errors | json}}</pre>
    </div>
    <form #addEinsatzForm="ngForm">
        <div class="add-einsatz-form__group">
            <mat-form-field appearance="fill">
                <mat-label>Name des/der Hilfesuchenden</mat-label>
                <input matInput type="text" placeholder="ex. Rainer Rosenthal" id="hilfesuchender"
                    [(ngModel)]="einsatz.hilfesuchender" name="hilfesuchender" required #hilfesuchender="ngModel" />
                <div *ngIf="hilfesuchender.invalid && (hilfesuchender.dirty || hilfesuchender.touched)">
                    <mat-error *ngIf="hilfesuchender.errors.required">
                        Bitte den Hilfesuchenden eintragen.
                    </mat-error>
                </div>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>T채tigkeit</mat-label>
                <mat-select required [(ngModel)]="einsatz.taetigkeit" name="taetigkeit" #taetigkeit="ngModel">
                    <mat-option *ngFor="let taetigkeit of taetigkeiten" [value]="taetigkeit.key">{{taetigkeit.label}}
                    </mat-option>
                </mat-select>
                <div *ngIf="taetigkeit.invalid && (taetigkeit.dirty || taetigkeit.touched)">
                    <mat-error *ngIf="taetigkeit.errors.required">
                        Bitte eine T채tigkeit ausw채hlen!
                    </mat-error>
                </div>
            </mat-form-field>
            <mat-form-field appearance="fill">
                <mat-label for="hilfesuchender">vermittlet Durch</mat-label>
                <input matInput type="text" id="vermittlerin" name="vermittlerin" [value]="einsatz.vermitteltDurch"
                    disabled />
            </mat-form-field>
            <mat-form-field appearance="fill">
                <input matInput type="text" id="vermitteltAm" name="vermitteltAm" [value]="vermitteltAm" disabled />
            </mat-form-field>
        </div>
        <div class="add-einsatz-form__group">
            <mat-form-field appearance="fill">
                <mat-label for="anmerkungen">Anmerkungen</mat-label>
                <textarea matInput name="anmerkungen" rows="5" width="100%" id="anmerkungen"
                    placeholder="Anmerkungen zur vermittelten T채tigkeit" [(ngModel)]="einsatz.anmerkungen"></textarea>
            </mat-form-field>
        </div>
        <div class="add-einsatz-form__group">
            <button mat-flat-button color="primary" *ngIf="addEinsatzForm.valid" type="submit"
                (click)="addEinsatz()">Einsatz Protokolieren</button>
            <button mat-flat-button color="primary" *ngIf="addEinsatzForm.invalid" type="submit" (click)="addEinsatz()"
                disabled>Einsatz
                Protokolieren</button>
        </div>
    </form>
</div>